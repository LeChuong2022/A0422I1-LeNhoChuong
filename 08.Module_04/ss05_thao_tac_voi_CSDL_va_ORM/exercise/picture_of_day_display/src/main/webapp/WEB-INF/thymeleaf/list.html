<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>
</head>
<body>
<h1>Picture of day</h1>
<img id="img-of-the-day">
<form th:action="@{/create}" method="post" th:object="${picture}" class="row g-3">
    <div class="col-5">
        <select th:field="*{rate}" class="form-select">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        </br>
    </div>
    <div class="row">
        <div class="col-3">
            <label class="form-label">Author</label>
            <br/>
            <input type="text" th:field="*{author}"/>
            <br/>
        </div>
    </div>
    <div class="row">
        <div class="col-5">
            <label class="form-label">Feedback</label>
            <br/>
            <textarea type="text" th:field="*{feedback}"></textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-1">
            <button type="submit" class="btn btn-primary">Comment</button>
        </div>
    </div>
</form>

<table border="1">
    <div th:each="pic, iter: ${pictures}" th:object="${pic}">
        <!--            <td colspan="3"></td>-->
        <tr>
            <span style="color: red" th:text="*{author}"></span>
            <span>:    </span>
            <span th:text="*{feedback}"></span><br/>
            <span th:switch="*{rate}">
                <span th:case="1">+1 Ugly</span>
                <span th:case="2">+2 Bad</span>
                <span th:case="3">+3 Normal</span>
                <span th:case="4">+4 Great</span>
                <span th:case="5">+5 So awesome</span>
            </span>
            <br/>
            <span th:if="*{likeNumber != null}">
                <span th:text="*{likeNumber}"></span>
                <span> likes</span>
            </span>
            <a th:href="@{update(id=*{id})}">
                <button type="button">like</button>
            </a>
            <br/>
            <br/>
        </tr>

    </div>
</table>

<script>
    let query = 'https://api.nasa.gov/planetary/apod?api_key=jhxC8g1PMIxiFcaIWrDwohXsQGSV3T1hTjhsUuny';
    let request = new XMLHttpRequest();
    request.open('GET', query);
    request.onload = function () {
        if (request.status === 200) {
            let response = JSON.parse(request.responseText);
            document.getElementById('img-of-the-day').setAttribute('src', response.url);
        }
    };
    request.send();
</script>

<!--    <form th:action="@{/student/search}" method="post">-->
<!--        <input type="text" name="name">-->
<!--        <input type="submit" name="Search">-->
<!--    </form>-->
<!--    <table border="1">-->
<!--        <tr>-->
<!--            <th>No</th>-->
<!--            <th>ID</th>-->
<!--            <th>Name</th>-->
<!--            <th>Age</th>-->
<!--            <th>Address</th>-->
<!--            <th>Detail</th>-->
<!--            <th>Detail2</th>-->
<!--            <th>Update</th>-->
<!--        </tr>-->
<!--        <tr th:each="stu, iter: ${students}" th:object="${stu}">-->
<!--            <td th:text="${iter.index}"></td>-->
<!--            <td th:text="${stu.id}"></td>-->
<!--            <td th:text="${iter.current.name}"></td>-->
<!--            <td th:text="*{age}"></td>-->
<!--            <td th:text="*{address}" th:if="${stu.address}"></td>-->
<!--            <td><a th:href="@{/student/detail/{id}(id=*{id})}">Detail</a></td>-->
<!--            <td><a th:href="@{/student/detail(id=*{id})}">Detail</a></td>-->
<!--            <td><a th:href="@{/student/update(id=*{id})}">Update</a></td>-->
<!--        </tr>-->
<!--    </table>-->
</body>
</html>